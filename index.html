<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0" />
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.0/css/bootstrap.min.css" />
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.0/js/bootstrap.min.js"></script>
		<link href="https://fonts.googleapis.com/css?family=Comfortaa" rel="stylesheet">
		<style>
      .vertical-center {
        min-height: 100vh; 
        display: flex;
        align-items: center;
      }

			#info {
				font-family: 'Comfortaa', cursive;
			}
    
			.form {
        max-height: 0vh;
        overflow: hidden;
        transition: all 2s;
			}

      #info:hover > .form { 
        max-height: 100vh;
        transition: all 2s;
      }

			#about {
				font-family: 'Comfortaa', cursive;
			}

      .pos-f-t {
      }

      #output {
        max-height: 100vh;
        margin-bottom: 5vh;
        display: hidden;
      }

		</style>
	</head>
	<body class="bg-dark" id="top">

		<div class="pos-f-t">
      <nav class="navbar navbar-dark bg-dark fixed-top">
        <div style="width: 10vw;">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button><br />
				<div class="collapse" id="navbarToggleExternalContent" style="float: left;">
					<div class="bg-dark p-4 ">
						<h4 class="align-left nav-item"><a class="text-white" href="#top">home</a></h4>
						<span><a class="text-white" href="#about">about</a></span>
					</div>
				</div>
        </div>
      </nav>
    </div>

    <div class="vertical-center">
      <div class="container text-light" id="info">
        <div class="row justify-content-center">
          <h1 style="font-size: 7em">Mood</h1>
        </div>

          <div class="form" id="frm">
            <div class="form-group row justify-content-center">
              <div class="col-sm-4">
                <label for="sel1">Search by:</label>
                <select class="form-control" id="sel1">
                  <option>Artist</option>
                  <option>Song</option>
                </select>
                <label class="col-form-label" style="text-align: right;">Search:</label>
                <input name="search" type="text" id="input" class="form-control"></input>
                <div style="padding-top: 15px;"><input type="submit" class="btn btn-primary" id="submit" value="Submit"></button></div>
              </div>
            </div>
          </div>
          <div class="row justify-content-center">
            <h1 style="font-size: 7em">Music</h1>
          </div>
        </div>
      </div>
      
      <div class="row" id="columns">
      </div>

		<div class="container" id="output">
      <div class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
        </div>
      </div>
    </div>

		<div class="container text-light bg-secondary" style="min-width: 100vw" name="about" id="about">
			<div class="row justify-content-center">
				<h1 style="font-size: 7em">About</h1>
				<div class="container" id="cards">
					<div class="row">

						<div class="col-md">
							<div class="card text-dark">
								<div class="card-body">
									<h2 class="card-title">Steven Borrego</h2>
									<p>Lorem Ipsum</p>
								</div>
							</div>
						</div>

						<div class="col-md">
								<div class="card text-dark">
									<div class="card-body">
										<h2 class="card-title">Yves Wienecke</h2>
										<p>Lorem Ipsum</p>
									</div>
							</div>
						</div>
					</div>
					</div>
			</div>
		</div>
	</body>

	<script>
    var showResult = function(data) {
        console.log(data);
        var o = '';
          for (var i = 0; i < data.length; i +=1) {
            o += '<div class="carousel-item';
            if (i === 0) { o += ' active '; }
            o += '" style="background-color: hsl('
              + data[i].color['h'] + ', '
              + data[i].color['s'] + '%, '
              + data[i].color['l'] + '%'
              + ')">'; 
              o += '<div style="height: 60vh;"></div>';
              o += '<div class="carousel-caption d-none d-md-block">';
                o += '<h5>' + data[i].name + '</h5>';
                o += '<p> Artists: ' + data[i].artists.join(', ');
                  o += '<br/>Popularity: ' + data[i].popularity;
                o+= '</p>';
              o += '</div>';
            o += '</div>';
          }
        $('.carousel-inner').append(o);

        var c ='';
        for(var i = 0; i < data.length; i += 1) {
          c += '<div class="col-sm" style="background-color: hsl('
            + data[i].color['h'] + ','
            + data[i].color['s'] + '%, '
            + data[i].color['l'] + '%'
            + ')"></div>';
        }
       $('#columns').append(c);
       $('#columns').css("min-height", "50vw").css("min-width", "100vw").css("margin-bottom", "5vh");
       $('.carousel-inner').css("min-height", "20vw").css("min-width", "30vw");
       $('#columns').css('display', block);
       $('#output').css("display", block);
      }

		$('#submit').on('click', function(event){
      console.log("in click event");
			$.ajax({
        'url' : '/submit',
				'type': 'POST',
				'data':  { input: $('#input').val() },
				'success': showResult
    });


    $('#input').on('keyup', function(event){
      console.log('in keyup event');
      if(event.which === 13){
        $('#submit').click();
      }
    });
	});
	</script>
</html>
